{"version":3,"sources":["components/ProposalCard/ProposalCard.js","views/Proposals/Proposals.js","views/Proposals/index.js","components/Header/Header.js","components/Header/index.js"],"names":["useStyles","makeStyles","root","width","height","marginRight","media","ProposalCard","props","proposal","title","description","website","image","id","votingAllowed","vote","address","classes","console","log","Card","className","CardActionArea","CardMedia","CardContent","Typography","gutterBottom","variant","component","color","style","maxHeight","CardActions","float","Tooltip","IconButton","aria-label","href","target","onClick","url","encodeURI","window","open","focus","require","theme","marginTop","spacing","marginBottom","paper","breakpoints","up","maxWidth","minWidth","textField","margin","subscribeButton","fieldGroup","display","flexGrow","wrapper","position","down","textAlign","hiddenImage","statusMsg","marginLeft","button","card","Proposals","web3Connect","useWeb3Connect","proposals","fetched","router","useRouter","useState","status","setStatus","useEffect","loaded","connected","history","push","deposit","daiDeposit","currentVote","hasProposal","allowVoting","enableTwitter","a","Box","getProfile","profile","getVerifiedAccounts","verified","twitter","username","contracts","dao","methods","enableTwitterVoting","top","right","enabledTwitter","Button","size","startIcon","Header","length","Grid","container","justify","map","key","item","align","Fragment","cursor"],"mappings":"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","file":"static/js/6.2b83c289.chunk.js","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InsertLinkIcon from '@material-ui/icons/InsertLink';\nimport { Link } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    width: 210,\n    height: 370,\n    marginRight: 16,\n  },\n  media: {\n    height: 140,\n  },\n});\n\nexport default function ProposalCard(props) {\n  const { title, description, website, image, id } = props.proposal;\n  const { votingAllowed, vote, address } = props;\n  const classes = useStyles();\n  console.log({ vote });\n  const voteTwitter = () => {\n    let url =\n      'https://twitter.com/intent/tweet?text=' +\n      encodeURI(`I (${address}) am voting for proposal ~${id} on `) +\n      '%23' +\n      encodeURI(`WhoopTogether - A no loss funding DAO`);\n    console.log(url);\n    var win = window.open(url, '_blank');\n    win.focus();\n  };\n  return (\n    <Card className={classes.root}>\n      <CardActionArea>\n        {image && (\n          <CardMedia className={classes.media} image={image} title={title} />\n        )}\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            {title}\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            color=\"textSecondary\"\n            component=\"p\"\n            style={{ maxHeight: 60 }}\n          >\n            {description}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardActions style={{ float: 'right' }}>\n        <Tooltip title=\"Open website\">\n          <IconButton aria-label=\"open\" href={website} target=\"_blank\">\n            <InsertLinkIcon />\n          </IconButton>\n        </Tooltip>\n        {votingAllowed && (\n          <>\n            <Tooltip title=\"Vote using your wallet\">\n              <IconButton\n                color=\"primary\"\n                aria-label=\"vote\"\n                onClick={() => vote(id)}\n              >\n                <HowToVoteIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Vote via Twitter\">\n              <IconButton\n                color=\"secondary\"\n                aria-label=\"vote via twitter\"\n                onClick={voteTwitter}\n              >\n                <TwitterIcon />\n              </IconButton>\n            </Tooltip>\n          </>\n        )}\n      </CardActions>\n    </Card>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport DonateIcon from '@material-ui/icons/AllInclusive';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport Box from '3box';\n\nimport { makeStyles } from '@material-ui/styles';\nimport { Typography, Button } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Container from '@material-ui/core/Container';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useForm } from 'react-hook-form';\nimport useRouter from '../../utils/useRouter';\nimport { uploadJson, getJson } from '../../modules/pinata';\nimport { Page, WalletProfile } from '../../components';\nimport Header from '../../components/Header';\nimport ImageUploader from 'react-images-upload';\nimport useWeb3Connect from '../../utils/useWeb3Connect';\nimport Input from '@material-ui/core/Input';\nimport FilledInput from '@material-ui/core/FilledInput';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport ProposalCard from '../../components/ProposalCard';\nconst BN = require('bn.js');\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    // backgroundColor: theme.palette.white\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  paper: {\n    [theme.breakpoints.up('md')]: {\n      maxWidth: '75%',\n      minWidth: 180,\n    },\n    width: '100%',\n    padding: theme.spacing(3),\n  },\n  title: {\n    // marginBottom: theme.spacing(2),\n  },\n  textField: {\n    margin: theme.spacing(1, 0),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n    },\n\n    // fontWeight: \"0.8em\"\n    // minWidth: 150\n  },\n  subscribeButton: {\n    // padding: theme.spacing(0, 1)\n  },\n  fieldGroup: {\n    [theme.breakpoints.up('sm')]: {\n      display: 'flex',\n      marginTop: theme.spacing(1),\n    },\n\n    alignItems: 'center',\n  },\n  flexGrow: {\n    flexGrow: 1,\n  },\n  wrapper: {\n    position: 'relative',\n    [theme.breakpoints.down('xs')]: {\n      textAlign: 'center',\n      marginTop: theme.spacing(2),\n    },\n    marginTop: theme.spacing(2),\n  },\n  hiddenImage: {\n    display: 'none',\n  },\n  image: {\n    display: 'block',\n  },\n  statusMsg: {\n    marginLeft: 16,\n  },\n  button: {\n    width: 190,\n  },\n  card: {\n    width: 210,\n    height: 370,\n  },\n}));\n\nconst Proposals = props => {\n  const { className, ...rest } = props;\n  const web3Connect = useWeb3Connect();\n  const { proposals, fetched } = web3Connect;\n  const classes = useStyles();\n  const router = useRouter();\n  const [status, setStatus] = useState('DRAFT');\n\n  useEffect(() => {\n    if (web3Connect.loaded && !web3Connect.connected) {\n      router.history.push('/');\n    }\n  }, [web3Connect]);\n  console.log({ deposit: web3Connect.daiDeposit });\n  const address = web3Connect.address;\n  console.log({\n    currentVote: web3Connect.currentVote,\n    deposit: web3Connect.daiDeposit,\n    hasProposal: web3Connect.hasProposal,\n    allowVoting:\n      web3Connect.currentVote === null &&\n      web3Connect.daiDeposit > 0 &&\n      web3Connect.hasProposal === false,\n  });\n\n  const enableTwitter = async () => {\n    setStatus('3BOX_VERIFICATION');\n    const profile = await Box.getProfile(web3Connect.address);\n    console.log(profile);\n    const verified = await Box.getVerifiedAccounts(profile);\n    console.log(verified);\n    if (verified && verified.twitter && verified.twitter.username) {\n      setStatus('3BOX_VERIFIED');\n      await web3Connect.contracts.dao.methods.enableTwitterVoting();\n      setStatus('ENABLED');\n    } else {\n      setStatus('3BOX_FAILED');\n    }\n  };\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Whoop Together | All Proposals\"\n      style={{ position: 'relative' }}\n    >\n      <div style={{ position: 'absolute', top: 0, right: 0 }}>\n        {status === 'DRAFT' && !web3Connect.enabledTwitter && (\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            // className={classes.button}\n            startIcon={<TwitterIcon />}\n            onClick={enableTwitter}\n          >\n            Enable Twitter voting\n          </Button>\n        )}\n        {status === '3BOX_VERIFICATION' && (\n          <Typography variant=\"caption\">Verifying 3Box twitter</Typography>\n        )}\n        {status === '3BOX_VERIFIED' && (\n          <Typography variant=\"caption\">Enabling twitter voting</Typography>\n        )}\n        {(status === 'ENABLED' || web3Connect.enabledTwitter) && (\n          <Typography variant=\"caption\">\n            You can now vote with twitter\n          </Typography>\n        )}\n        {status === '3BOX_FAILED' && (\n          <Typography variant=\"caption\" style={{ color: '#FF9494' }}>\n            3Box twitter verification failed\n          </Typography>\n        )}\n      </div>\n      <Header />\n      {web3Connect.daiDeposit === 0 && (\n        <>\n          <div style={{ margin: 16, textAlign: 'center' }}>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              size=\"large\"\n              className={classes.button}\n              startIcon={<DonateIcon />}\n              onClick={() => {\n                router.history.push('/deposit');\n              }}\n            >\n              Deposit\n            </Button>\n          </div>\n        </>\n      )}\n      {web3Connect.daiDeposit > 0 && !web3Connect.hasProposal && (\n        <>\n          <div style={{ margin: 16, textAlign: 'center' }}>\n            <Typography variant=\"body1\">\n              You have a deposit of {web3Connect.daiDeposit} DAI\n            </Typography>\n          </div>\n        </>\n      )}\n      {web3Connect.currentVote !== null && (\n        <>\n          <Typography variant=\"h5\" className={classes.title}>\n            Your vote\n          </Typography>\n          <div style={{ marginTop: 16, marginBottom: 16 }}>\n            <ProposalCard\n              proposal={web3Connect.currentVote}\n              votingAllowed={false}\n              address={address}\n            />\n          </div>\n        </>\n      )}\n\n      <Typography variant=\"h5\" className={classes.title}>\n        All Proposals\n      </Typography>\n      <div style={{ marginTop: 16 }}>\n        {fetched && proposals.length > 0 && (\n          <>\n            <Grid container justify=\"space-evenly\" spacing={4}>\n              {proposals.map(proposal => (\n                <Grid key={proposal.id} item>\n                  <div className={classes.card}>\n                    <ProposalCard\n                      proposal={proposal}\n                      votingAllowed={\n                        web3Connect.currentVote === null &&\n                        web3Connect.daiDeposit > 0 &&\n                        web3Connect.hasProposal === false\n                      }\n                      vote={web3Connect.contracts.dao.methods.vote}\n                      address={address}\n                    />\n                  </div>\n                </Grid>\n              ))}\n            </Grid>\n          </>\n        )}\n        {fetched && proposals.length === 0 && (\n          <Typography variant=\"caption\" align=\"center\">\n            No proposals available\n          </Typography>\n        )}\n        {!fetched && (\n          <Typography variant=\"caption\" align=\"center\">\n            Loading proposals....\n          </Typography>\n        )}\n      </div>\n    </Page>\n  );\n};\n\nProposals.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default Proposals;\n","export { default } from './Proposals';\n","/* eslint-disable no-undef */\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport useRouter from '../../utils/useRouter';\n\n// import useRouter from 'utils/useRouter';\nconst Header = props => {\n  const router = useRouter();\n  return (\n    <React.Fragment>\n      <div style={{ marginBottom: 16 }}>\n        <Typography\n          gutterBottom\n          variant=\"h4\"\n          style={{ marginTop: 16, cursor: 'pointer' }}\n          onClick={() => {\n            router.history.push('/');\n          }}\n        >\n          WhoopTogether\n        </Typography>\n\n        <Typography variant=\"body1\" style={{ marginTop: 16 }}>\n          Deposit your DAI. Let your idle interest support community projects.\n          Vote DAO style on twitter for your favourite project every 2 weeks.\n          Interest from the pool is sent to the chosen community project for 2\n          weeks if selected by the DAO. Withdraw your original DAI at anytime.\n        </Typography>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default Header;\n","export { default } from './Header';\n"],"sourceRoot":""}