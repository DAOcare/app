(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[8],{2499:function(e,t,r){"use strict";var n=r(1),a=r(5),o=r(0),i=r.n(o),p=(r(11),r(12)),s=r(2487),c=r(21),l=r(994),m=i.a.forwardRef((function(e,t){var r=e.children,o=e.classes,c=e.className,m=e.component,u=void 0===m?"div":m,d=e.disablePointerEvents,f=void 0!==d&&d,g=e.disableTypography,y=void 0!==g&&g,h=e.position,b=e.variant,v=Object(a.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),O=Object(l.b)()||{},A=b;return b&&O.variant,O&&!A&&(A=O.variant),i.a.createElement(l.a.Provider,{value:null},i.a.createElement(u,Object(n.a)({className:Object(p.a)(o.root,c,f&&o.disablePointerEvents,O.hiddenLabel&&o.hiddenLabel,"filled"===A&&o.filled,{start:o.positionStart,end:o.positionEnd}[h],"dense"===O.margin&&o.marginDense),ref:t},v),"string"!==typeof r||y?r:i.a.createElement(s.a,{color:"textSecondary"},r)))}));t.a=Object(c.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(m)},2507:function(e,t,r){"use strict";var n=r(108),a=r(1),o=(r(11),r(820));var i=function(e,t){return t?Object(o.a)(e,t,{clone:!1}):e};var p=function(e){var t=function(t){var r=e(t);return t.css?Object(a.a)({},i(r,e(Object(a.a)({theme:t.theme},t.css))),{},function(e,t){var r={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(r[n]=e[n])})),r}(t.css,[e.filterProps])):r};return t.propTypes={},t.filterProps=["css"].concat(Object(n.a)(e.filterProps)),t};var s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){return t.reduce((function(t,r){var n=r(e);return n?i(t,n):t}),{})};return n.propTypes={},n.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),n},c=r(9),l=r(142),m={xs:0,sm:600,md:960,lg:1280,xl:1920},u={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(m[e],"px)")}};function d(e,t,r){if(Array.isArray(t)){var n=e.theme.breakpoints||u;return t.reduce((function(e,a,o){return e[n.up(n.keys[o])]=r(t[o]),e}),{})}if("object"===Object(l.a)(t)){var a=e.theme.breakpoints||u;return Object.keys(t).reduce((function(e,n){return e[a.up(n)]=r(t[n]),e}),{})}return r(t)}function f(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var g=function(e){var t=e.prop,r=e.cssProperty,n=void 0===r?e.prop:r,a=e.themeKey,o=e.transform,i=function(e){if(null==e[t])return null;var r=e[t],i=f(e.theme,a)||{};return d(e,r,(function(e){var t;return"function"===typeof i?t=i(e):Array.isArray(i)?t=i[e]||e:(t=f(i,e)||e,o&&(t=o(t))),!1===n?t:Object(c.a)({},n,t)}))};return i.propTypes={},i.filterProps=[t],i};function y(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var h=s(g({prop:"border",themeKey:"borders",transform:y}),g({prop:"borderTop",themeKey:"borders",transform:y}),g({prop:"borderRight",themeKey:"borders",transform:y}),g({prop:"borderBottom",themeKey:"borders",transform:y}),g({prop:"borderLeft",themeKey:"borders",transform:y}),g({prop:"borderColor",themeKey:"palette"}),g({prop:"borderRadius",themeKey:"shape"})),b=s(g({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),g({prop:"display"}),g({prop:"overflow"}),g({prop:"textOverflow"}),g({prop:"visibility"}),g({prop:"whiteSpace"})),v=s(g({prop:"flexBasis"}),g({prop:"flexDirection"}),g({prop:"flexWrap"}),g({prop:"justifyContent"}),g({prop:"alignItems"}),g({prop:"alignContent"}),g({prop:"order"}),g({prop:"flex"}),g({prop:"flexGrow"}),g({prop:"flexShrink"}),g({prop:"alignSelf"}),g({prop:"justifyItems"}),g({prop:"justifySelf"})),O=s(g({prop:"gridGap"}),g({prop:"gridColumnGap"}),g({prop:"gridRowGap"}),g({prop:"gridColumn"}),g({prop:"gridRow"}),g({prop:"gridAutoFlow"}),g({prop:"gridAutoColumns"}),g({prop:"gridAutoRows"}),g({prop:"gridTemplateColumns"}),g({prop:"gridTemplateRows"}),g({prop:"gridTemplateAreas"}),g({prop:"gridArea"})),A=s(g({prop:"position"}),g({prop:"zIndex",themeKey:"zIndex"}),g({prop:"top"}),g({prop:"right"}),g({prop:"bottom"}),g({prop:"left"})),E=s(g({prop:"color",themeKey:"palette"}),g({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),j=g({prop:"boxShadow",themeKey:"shadows"});function w(e){return e<=1?"".concat(100*e,"%"):e}var D=g({prop:"width",transform:w}),x=g({prop:"maxWidth",transform:w}),P=g({prop:"minWidth",transform:w}),I=g({prop:"height",transform:w}),T=g({prop:"maxHeight",transform:w}),N=g({prop:"minHeight",transform:w}),k=(g({prop:"size",cssProperty:"width",transform:w}),g({prop:"size",cssProperty:"height",transform:w}),s(D,x,P,I,T,N,g({prop:"boxSizing"}))),R=r(16);var B={m:"margin",p:"padding"},S={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},F={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},C=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){if(e.length>2){if(!F[e])return[e];e=F[e]}var t=e.split(""),r=Object(R.a)(t,2),n=r[0],a=r[1],o=B[n],i=S[a]||"";return Array.isArray(i)?i.map((function(e){return o+e})):[o+i]})),K=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function G(e,t){return function(r){return e.reduce((function(e,n){return e[n]=function(e,t){if("string"===typeof t)return t;var r=e(Math.abs(t));return t>=0?r:"number"===typeof r?-r:"-".concat(r)}(t,r),e}),{})}}function L(e){var t=function(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}(e.theme);return Object.keys(e).map((function(r){if(-1===K.indexOf(r))return null;var n=G(C(r),t),a=e[r];return d(e,a,n)})).reduce(i,{})}L.propTypes={},L.filterProps=K;var V=L,M=s(g({prop:"fontFamily",themeKey:"typography"}),g({prop:"fontSize",themeKey:"typography"}),g({prop:"fontStyle",themeKey:"typography"}),g({prop:"fontWeight",themeKey:"typography"}),g({prop:"letterSpacing"}),g({prop:"lineHeight"}),g({prop:"textAlign"})),W=r(5),z=r(0),Y=r.n(z),_=r(12),H=r(63),X=r.n(H),q=r(830);function J(e,t){var r={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(r[n]=e[n])})),r}var $=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.name,o=Object(W.a)(r,["name"]);var i,p=n,s="function"===typeof t?function(e){return{root:function(r){return t(Object(a.a)({theme:e},r))}}}:{root:t},c=Object(q.a)(s,Object(a.a)({Component:e,name:n||e.displayName,classNamePrefix:p},o));t.filterProps&&(i=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var l=Y.a.forwardRef((function(t,r){var n=t.children,o=t.className,p=t.clone,s=t.component,l=Object(W.a)(t,["children","className","clone","component"]),m=c(t),u=Object(_.a)(m.root,o),d=l;if(i&&(d=J(d,i)),p)return Y.a.cloneElement(n,Object(a.a)({className:Object(_.a)(n.props.className,u)},d));if("function"===typeof n)return n(Object(a.a)({className:u},d));var f=s||e;return Y.a.createElement(f,Object(a.a)({ref:r,className:u},d),n)}));return X()(l,e),l}},Q=r(129),U=function(e){var t=$(e);return function(e,r){return t(e,Object(a.a)({defaultTheme:Q.a},r))}},Z=p(s(h,b,v,O,A,E,j,k,V,M)),ee=U("div")(Z,{name:"MuiBox"});t.a=ee},2511:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),o=r(13),i=r(16),p=r(5),s=r(9),c=r(0),l=r.n(c),m=(r(12),r(830)),u=r(2487),d=r(2498),f=r(2507),g=r(2488),y=r(992),h=r(107),b=(r(201),r(91)),v=r(902),O=(r(993),r(195)),A=r(2499),E=r(960),j=r.n(E),w=r(194),D=Object(m.a)((function(e){var t,r,n;return{root:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},paper:(t={},Object(s.a)(t,e.breakpoints.up("md"),{maxWidth:"75%",minWidth:180}),Object(s.a)(t,"width","100%"),Object(s.a)(t,"padding",e.spacing(3)),t),title:{},textField:Object(s.a)({margin:e.spacing(1,0)},e.breakpoints.up("sm"),{marginRight:e.spacing(2)}),subscribeButton:{},fieldGroup:(r={},Object(s.a)(r,e.breakpoints.up("sm"),{display:"flex",marginTop:e.spacing(1)}),Object(s.a)(r,"alignItems","center"),r),flexGrow:{flexGrow:1},wrapper:(n={position:"relative"},Object(s.a)(n,e.breakpoints.down("xs"),{textAlign:"center",marginTop:e.spacing(2)}),Object(s.a)(n,"marginTop",e.spacing(2)),n),hiddenImage:{display:"none"},image:{display:"block"},statusMsg:{marginLeft:16},button:{width:190}}})),x=function(e){e.className,Object(p.a)(e,["className"]);var t=Object(c.useState)("DRAFT"),r=Object(i.a)(t,2),n=r[0],s=r[1],m=D(),E=Object(h.a)(),x=Object(O.a)();Object(c.useEffect)((function(){x.loaded&&!x.connected&&E.history.push("/")}),[x]);var P=Object(y.a)(),I=P.register,T=P.handleSubmit,N=P.watch,k=N("amount")?N("amount"):0,R=Number(x.daiBalance);Number(x.daiDeposit);console.log({allowance:x.daiBalance,amount:k});var B=function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.amount,s("DEPOSITING"),console.log(t),e.next=5,x.contracts.dao.methods.triggerDeposit(r);case 5:s("DEPOSITED");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(b.a,{className:m.root,title:"Whoop Together | Deposit"},l.a.createElement(v.a,null),l.a.createElement(u.a,{variant:"h5",className:m.title},"Deposit DAI"),x.hasProposal&&l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{style:{color:"#FF9494"}},"As an owner of a proposal, you are not allowed to join the pool and vote on proposals.")),!x.hasProposal&&x.daiDeposit>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{style:{color:"#FF9494"}},"You can only deposit once per each cycle."),l.a.createElement(u.a,{variant:"body1"},"Current deposit: ",x.daiDeposit," DAI"),l.a.createElement("div",{className:m.divContainer,style:{marginTop:24,marginBottom:24,textAlign:"center"}},l.a.createElement(d.a,{color:"primary",size:"large",className:m.button,startIcon:l.a.createElement(j.a,null),onClick:function(){E.history.push("/proposals")}},"Vote"))),!x.hasProposal&&0===x.daiDeposit&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:T(B)},l.a.createElement(f.a,{className:m.fieldGroup},l.a.createElement(g.a,{label:"Amount",name:"amount",variant:"outlined",inputRef:I({required:!0}),className:m.textField,required:!0,InputProps:{endAdornment:l.a.createElement(A.a,{position:"end"},"DAI")},style:{width:300},helperText:"Balance: ".concat(x.daiBalance," DAI | Deposit: ").concat(x.daiDeposit," DAI")}),(0===x.daiAllowance||"DAI_APPROVED"===n||"APPROVING_DAI"===n)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{variant:"contained",color:"primary",style:{width:190,marginBottom:22},disabled:x.daiAllowance>0||"DRAFT"!==n,onClick:Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("APPROVING_DAI"),e.next=3,x.contracts.dai.methods.triggerDaiApprove(new w(999999));case 3:s("DAI_APPROVED");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();case 2:case"end":return e.stop()}}),e)})))},"Allow DAI deposit"),"APPROVING_DAI"===n&&l.a.createElement(u.a,{variant:"body1",component:"span",className:m.statusMsg,style:{marginBottom:22}},"Allowing deposits of DAI..."),("DAI_APPROVED"===n||x.daiAllowance>0)&&l.a.createElement(u.a,{variant:"body2",component:"span",className:m.statusMsg,style:{marginBottom:22}},"Deposit of DAI enabled"))),l.a.createElement("div",{className:m.wrapper},l.a.createElement(d.a,{variant:"contained",color:"primary",className:m.button,type:"submit",disabled:"DRAFT"!==n&&"DAI_APPROVED"!==n||0==x.daiAllowance||R<k||0===R},"Deposit"),x.daiBalance<k&&l.a.createElement(u.a,{variant:"body2",component:"span",className:m.statusMsg,style:{color:"#FF9494"}},"You don't have enough DAI on your wallet"),"DEPOSITING"===n&&l.a.createElement(u.a,{variant:"body2",component:"span",className:m.statusMsg},"Depositing ",k," DAI..."),"DEPOSITED"===n&&l.a.createElement(u.a,{variant:"body2",component:"span",className:m.statusMsg},"Your funds have been deposited, thank you!")),l.a.createElement("div",{className:m.divContainer,style:{marginTop:24,marginBottom:24,textAlign:"center"}},l.a.createElement(d.a,{color:"primary",size:"large",className:m.button,startIcon:l.a.createElement(j.a,null),onClick:function(){E.history.push("/proposals")}},"Vote")))))};r.d(t,"default",(function(){return x}))},902:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(2487),i=r(107),p=function(e){var t=Object(i.a)();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{marginBottom:16}},a.a.createElement(o.a,{gutterBottom:!0,variant:"h4",style:{marginTop:16,cursor:"pointer"},onClick:function(){t.history.push("/")}},"WhoopTogether"),a.a.createElement(o.a,{variant:"body1",style:{marginTop:16}},"Deposit your DAI. Let your idle interest support community projects. Vote DAO style on twitter for your favourite project every 2 weeks. Interest from the pool is sent to the chosen community project for 2 weeks if selected by the DAO. Withdraw your original DAI at anytime.")))};r.d(t,"a",(function(){return p}))}}]);
//# sourceMappingURL=8.3930c160.chunk.js.map