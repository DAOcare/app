(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[9],{1498:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(61),i=a(13),s=a(16),c=a(5),l=a(9),m=a(0),u=a.n(m),p=a(12),d=a(830),b=a(2487),g=a(2498),f=a(2488),h=a(992),y=a(107),v=a(201),O=a(91),w=a(902),A=(a(993),a(195)),E=a(960),I=a.n(E),j=a(194),D=Object(d.a)((function(e){var t,a,n;return{root:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},paper:(t={},Object(l.a)(t,e.breakpoints.up("md"),{maxWidth:"75%",minWidth:180}),Object(l.a)(t,"width","100%"),Object(l.a)(t,"padding",e.spacing(3)),t),title:{},textField:Object(l.a)({margin:e.spacing(1,0)},e.breakpoints.up("sm"),{marginRight:e.spacing(2)}),subscribeButton:{},fieldGroup:(a={},Object(l.a)(a,e.breakpoints.up("sm"),{display:"flex",marginTop:e.spacing(1)}),Object(l.a)(a,"alignItems","center"),a),flexGrow:{flexGrow:1},wrapper:(n={position:"relative"},Object(l.a)(n,e.breakpoints.down("xs"),{textAlign:"center",marginTop:e.spacing(2)}),Object(l.a)(n,"marginTop",e.spacing(2)),n),hiddenImage:{display:"none"},image:{display:"block"},statusMsg:{marginLeft:16},button:{width:190}}})),N=function(e){e.className,Object(c.a)(e,["className"]);var t=Object(m.useState)("DRAFT"),a=Object(s.a)(t,2),n=a[0],l=a[1],d=Object(m.useState)(!1),E=Object(s.a)(d,2),N=E[0],T=E[1],x=D(),P=Object(y.a)(),S=Object(A.a)();Object(m.useEffect)((function(){S.loaded&&!S.connected&&P.history.push("/")}),[S]);var k=Object(h.a)(),B=k.register,F=k.handleSubmit,R=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("IPFS_UPLOAD"),console.log(t),a=Object(o.a)({},t,{image:N}),e.next=5,Object(v.b)(t.title,a);case 5:return n=e.sent,l("SUBMITTING_BLOCKCHAIN"),e.next=9,S.contracts.dao.methods.triggerSubmitProposal(n);case 9:l("SUBMITTED");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log({status:n,allowance:S.daiAllowance,balance:S.daiBalance}),u.a.createElement(O.a,{className:x.root,title:"Whoop Together | Submit Proposal"},u.a.createElement(w.a,null),u.a.createElement(b.a,{variant:"h5",className:x.title},"Submit Proposal"),u.a.createElement("form",{onSubmit:F(R)},u.a.createElement(f.a,{fullWidth:!0,label:"Title",name:"title",variant:"outlined",inputRef:B({required:!0}),className:Object(p.a)(x.flexGrow,x.textField),required:!0}),u.a.createElement(f.a,{fullWidth:!0,label:"Description",name:"description",variant:"outlined",inputRef:B({required:!0}),className:Object(p.a)(x.flexGrow,x.textField),multiline:!0,rows:5,required:!0}),u.a.createElement(f.a,{fullWidth:!0,label:"Website",name:"website",variant:"outlined",inputRef:B({required:!0}),className:Object(p.a)(x.flexGrow,x.textField),required:!0}),u.a.createElement(f.a,{fullWidth:!0,label:"Team",name:"team",variant:"outlined",inputRef:B,className:Object(p.a)(x.flexGrow,x.textField),multiline:!0,rows:3}),u.a.createElement(b.a,{variant:"caption",display:"block"},"Logo"),u.a.createElement("input",{type:"file",onChange:function(){var e=document.getElementById("logoImg"),t=document.querySelector("input[type=file]").files[0],a=new FileReader;a.addEventListener("load",(function(){e.src=a.result,T(a.result)}),!1),t&&a.readAsDataURL(t)}}),u.a.createElement("img",{id:"logoImg",src:"",className:N?x.image:x.hiddenImage,height:"200",alt:"Image preview..."}),u.a.createElement(b.a,{variant:"body1",style:{marginTop:16}},"In order to submit a proposol you need to stake ",50," DAI."),u.a.createElement("div",{className:x.wrapper},u.a.createElement(g.a,{variant:"contained",color:"primary",className:x.button,disabled:S.daiAllowance>0,onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("APPROVING_DAI"),e.next=3,S.contracts.dai.methods.triggerDaiApprove(new j(50));case 3:l("DAI_APPROVED");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();case 2:case"end":return e.stop()}}),e)})))},"1. Allow 50 DAI"),"APPROVING_DAI"===n&&u.a.createElement(b.a,{variant:"body1",component:"span",className:x.statusMsg},"Allowing transferring of 50 DAI..."),("DAI_APPROVED"===n||S.daiAllowance>0)&&u.a.createElement(b.a,{variant:"body2",component:"span",className:x.statusMsg},"Allowance of 50 DAI complete!")),u.a.createElement("div",{className:x.wrapper},u.a.createElement(g.a,{variant:"contained",color:"primary",className:x.button,type:"submit",disabled:"DRAFT"!==n&&"DAI_APPROVED"!==n||0==S.daiAllowance||S.daiBalance<50},"2. Submit Proposal"),S.daiBalance<50&&u.a.createElement(b.a,{variant:"body2",component:"span",className:x.statusMsg,style:{color:"#FF9494"}},"You don't have enough DAI on your wallet"),"IPFS_UPLOAD"===n&&u.a.createElement(b.a,{variant:"body2",component:"span",className:x.statusMsg},"Uploading proposal to IPFS..."),"SUBMITTING_BLOCKCHAIN"===n&&u.a.createElement(b.a,{variant:"body2",component:"span",className:x.statusMsg},"Submitting proposal to the DAO..."),"SUBMITTED"===n&&u.a.createElement(b.a,{variant:"body2",component:"span",className:x.statusMsg},"Proposal submitted to the DAO successfully!")),"SUBMITTED"===n&&u.a.createElement("div",{className:x.divContainer,style:{marginTop:24,marginBottom:24,textAlign:"center"}},u.a.createElement(g.a,{color:"primary",size:"large",className:x.button,startIcon:u.a.createElement(I.a,null),onClick:function(){P.history.push("/proposals")}},"Vote"," "))))};a.d(t,"default",(function(){return N}))},902:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(2487),i=a(107),s=function(e){var t=Object(i.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(o.a,{gutterBottom:!0,variant:"h4",style:{marginTop:16,cursor:"pointer"},onClick:function(){t.history.push("/")}},"WhoopTogether"),r.a.createElement(o.a,{variant:"body1",style:{marginTop:16}},"Deposit your DAI. Let your idle interest support community projects. Vote DAO style on twitter for your favourite project every 2 weeks. Interest from the pool is sent to the chosen community project for 2 weeks if selected by the DAO. Withdraw your original DAI at anytime.")))};a.d(t,"a",(function(){return s}))}}]);
//# sourceMappingURL=9.362c223f.chunk.js.map